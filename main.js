(()=>{"use strict";class t{constructor(t,e){this.title=t,this.tasks=[],this.type=e,this.total=this.tasks.length}getTotalTasks(){return this.tasks.length}resetTaskIndexes(){let t=0;return this.tasks.forEach((e=>{e.index=t,t++})),this.tasks}getTasks(){this.tasks.slice(0).sort((function(t,e){var s=t.title.toLowerCase(),n=e.title.toLowerCase();return s<n?-1:s>n?1:0}))}getTasks(){this.tasks.slice(0).sort((function(t,e){var s=t.title.toLowerCase(),n=e.title.toLowerCase();return s<n?-1:s>n?1:0}))}}function e(t,e,s,n){let a=document.createElement(t);return a.textContent=s,a.id=n,""!=e&&e.split(",").forEach((t=>{a.classList.add(t)})),""==n?(a.classList.add(e),a):a}class s{constructor(t,e,s,n,a){this.title=t,this.description=e,this.dueDate=s,this.priority=n,this.status=!1,this.project=a}set setIndex(t){this.index=t}get getIndex(){return this.index}changeTaskStatus(){return this.status=!this.status,this}}const n=(t,s)=>{let n=document.getElementById(t);n.innerHTML="";let a=e("ul","menu-items","","");return s.filter((e=>e.type==t)).forEach((t=>{let s=e("li","menu-item","","");s.setAttribute("project-name",t.title),"Personal"==t.title&&s.classList.add("active");let n=e("label","menu",t.title,"");n.setAttribute("project-name",t.title);let i=e("label","badge",t.getTotalTasks(),`badge-${t.title}`);i.setAttribute("project-name",t.title),s.appendChild(n),s.appendChild(i),a.appendChild(s)})),n.appendChild(a),n},a=t=>{let s=document.getElementById("cards-container");s.innerHTML="",t.forEach(((t,n)=>{let a=e("div",`card,${t.priority}`,"");a.setAttribute("data-project",t.project),a.setAttribute("data-index",n),1==t.status&&a.classList.add("done");let i=e("div","card-items"),o=e("input","checkbox","");o.type="checkbox",o.checked=t.status;let l=e("label","card-text",t.title);i.appendChild(o),i.appendChild(l);let d=e("div","card-items"),r=e("label","",t.dueDate),c=e("input","btn-details");c.type="button",c.value="Details";let u=e("i","fa-solid,fa-pen-to-square"),p=e("i","fa-solid,fa-trash");d.appendChild(c),d.appendChild(r),d.appendChild(u),d.appendChild(p),a.appendChild(i),a.appendChild(d),s.appendChild(a)}))};function i(t,e){document.getElementById(`badge-${e}`).textContent=t.length,a(t)}const o=new class{constructor(){this.projects=[],this.projects.push(new t("Personal","main-projects")),this.projects.push(new t("Work","main-projects")),this.projects.push(new t("College","main-projects")),this.projects.push(new t("Learn React","secondary-projects")),this.projects.push(new t("Odin Project","secondary-projects")),this.projects.push(new t("Week","secondary-projects")),this.currentProject="Personal"}addProject(e){return this.projects.push(new t(e,"secondary-projects")),this.projects}addTask(t,e,n,a,i){let o=new s(t,e,n,a,i),l=this.getProjectByName(i);return l.tasks.push(o),l.tasks}modifyTask(t){console.log(t);let e=this.projects.find((e=>e.title==t.mprojectName)).tasks.find((e=>e.title==t.mformType));e.title=t.mtaskName,e.description=t.text,e.dueDate=t.mtaskDueDate,e.priority=t.mpriority;let s=this.getProjectByName(t.mprojectName);return console.log(s.tasks),s.tasks}changeTaskStatus(t,e){let s=this.projects.find((e=>e.title==t)).tasks[e];return s.status=!s.status,s}removeTask(t,e){let s=this.projects.find((e=>e.title==t));return s.tasks.splice(e,1),s.tasks}getAllProjects(){return this.projects}getProjectByName(t){return this.projects.find((e=>e.title==t))}getTasksByProject(t,e){return this.projects.find((e=>e.title==t)).tasks[e]}};function l(){for(let t of document.getElementsByClassName("btn-details"))t.addEventListener("click",h)}function d(){for(let t of document.getElementsByClassName("checkbox"))t.addEventListener("click",g)}function r(){let t=document.getElementsByClassName("menu-item");for(let e=2;e<t.length;e++)t[e].addEventListener("click",y)}function c(){for(let t of document.getElementsByClassName("fa-trash"))t.addEventListener("click",p)}function u(){for(let t of document.getElementsByClassName("fa-pen-to-square"))t.addEventListener("click",m)}o.addTask("Test TASK 1","This is just a test","2022-10-23","High","Personal"),o.addTask("Test TASK 2","This is just a test","2022-10-23","Low","Personal"),o.addTask("Test TASK 3","This is just a test","2022-10-23","Medium","Personal"),o.addTask("Test TASK 4","This is just a test","2022-10-23","Medium","Personal"),o.addTask("Test TASK 1","This is just a test","2022-10-23","High","Work"),o.addTask("Test TASK 2","This is just a test","2022-10-23","Low","Work"),o.addTask("Test TASK 3","This is just a test","2022-10-23","Medium","College"),o.addTask("Test TASK 4","This is just a test","2022-10-23","Medium","College");const p=t=>{let e=t.target.parentNode.parentNode,s=e.getAttribute("data-project"),n=e.getAttribute("data-index");i(o.removeTask(s,n),s),c(),u(),l()};function m(t){let e=t.target.parentNode.parentNode;!function(t){var e,s=document.getElementById("closeAddForm"),n=document.getElementsByClassName("close")[2];e=t,document.getElementById("mtaskName").value=e.title,document.getElementById("mformType").value=e.title,document.getElementById("mtaskDetails").value=e.description,document.getElementById("mtaskDueDate").value=e.dueDate,document.getElementById("mprojectName").value=e.project,document.getElementById("mindex").value=e.index,document.getElementById(`mpriority-${e.priority}`).checked=!0;var a=document.getElementById("modifyForm");a.style.display="block",s.onclick=function(){a.style.display="block"},n.onclick=function(){a.style.display="none"},window.onclick=function(t){t.target==a&&(a.style.display="none")}}(o.getTasksByProject(e.getAttribute("data-project"),e.getAttribute("data-index")))}function y(t){!function(t){document.getElementsByClassName("active")[0].classList.toggle("active"),t.target.classList.toggle("active")}(t);let e=t.target.getAttribute("project-name"),s=o.getProjectByName(e);o.currentProject=e,a(s.tasks)}function h(t){let e=t.target.parentNode.parentNode;!function(t){document.getElementById("myBtn");var e,s=document.getElementsByClassName("close")[0];e=t,document.getElementById("detail-taskTitle").textContent=e.project,document.getElementById("detail-taskProject").textContent=e.title,document.getElementById("detail-taskDate").textContent=e.dueDate,document.getElementById("detail-taskDetails").textContent=e.description;var n=document.getElementById("myModal");n.style.display="block",s.onclick=function(){n.style.display="none"},window.onclick=function(t){t.target==n&&(n.style.display="none")}}(o.getTasksByProject(e.getAttribute("data-project"),e.getAttribute("data-index")))}function g(t){let e=t.target.parentNode.parentNode;e.classList.toggle("done");let s=e.getAttribute("data-project"),n=e.getAttribute("data-index"),a=o.changeTaskStatus(s,n);console.log(a)}!function(t){let s=t.getAllProjects();n("main-projects",s),n("secondary-projects",s),s.filter((e=>e.title==t.currentProject)).forEach((t=>{(t=>{let s=document.getElementById("cards-container");s.innerHTML="",t.forEach(((t,n)=>{let a=e("div",`card,${t.priority}`,"");1==t.status&&a.classList.add("done"),a.setAttribute("data-project",t.project),a.setAttribute("data-index",n);let i=e("div","card-items"),o=e("input","checkbox","");o.type="checkbox",o.checked=t.status;let l=e("label","card-text",t.title);i.appendChild(o),i.appendChild(l);let d=e("div","card-items");console.log();let r=e("label","",t.dueDate),c=e("input","btn-details");c.type="button",c.value="Details";let u=e("i","fa-solid,fa-pen-to-square"),p=e("i","fa-solid,fa-trash");d.appendChild(c),d.appendChild(r),d.appendChild(u),d.appendChild(p),a.appendChild(i),a.appendChild(d),s.appendChild(a)}))})(t.tasks)}))}(o),c(),l(),document.getElementById("formTask").addEventListener("submit",(t=>{t.preventDefault(),function(t){const e=new FormData(t.target),s=Object.fromEntries(e);if(console.log(s),"task"==s.formType)return function(t,e){i(t,e)}(o.addTask(s.taskName,s.text,s.taskDueDate,s.priority,o.currentProject),o.currentProject),c(),l(),u(),void d();{let t=o.addProject(s.projectName);console.log(t),n("secondary-projects",t),r()}}(t)})),document.getElementById("formModifyTask").addEventListener("submit",(t=>{t.preventDefault(),function(t){const e=new FormData(t.target),s=Object.fromEntries(e);let n=o.modifyTask(s);a(n),c(),l(),u(),d()}(t)})),document.getElementById("btnAdd").addEventListener("click",(function(t){var e,s,n;e=document.getElementById("closeAddForm"),s=document.getElementsByClassName("close")[1],(n=document.getElementById("addForm")).style.display="block",e.onclick=function(){n.style.display="block"},s.onclick=function(){n.style.display="none"},window.onclick=function(t){t.target==n&&(n.style.display="none")}})),document.getElementById("tasksForm").addEventListener("click",(function(){!function(){let t=document.getElementById("formTask");t.innerHTML="",t.innerHTML='<input type="text" class="full" placeholder="Title: Pay bills" name="taskName" id="taskName">\n    <input type="text"  id="formType" name="formType" value="task" hidden>\n    <textarea name="text" class="full textarea" placeholder="Details: eg internet, phone, rent" cols="40" rows="5" id="taskDetails"></textarea>\n    <div class="form-group">\n        <label class="form-field-title">Due Date:</label>\n        <input type="date" class="" placeholder="Due date" name="taskDueDate" id="taskDueDate">\n    </div>\n    <div class="form-group between">\n        <div class="form-fields" >\n            <div class="form-priority">\n                <div class="form-priority-title">\n                    <label class="form-field-title">Priority:</label>\n                   </div>\n                   <div class="">\n                    <input type="radio" id="priority-Low" name="priority" value="Low" >\n                    <label for="priority-Low" class= "priority low" >Low</label>\n                    <input type="radio" id="priority-Medium" name="priority" value="Medium" >\n                    <label for="priority-Medium" class= "priority medium" >Medium</label>\n                    <input type="radio" class= "" id="priority-High" name="priority" value="High" >\n                    <label for="priority-High" class="priority high" >High</label>\n                </div>\n            </div>\n        </div>\n      <div class="form-btn">\n        <input type="submit" value="Add task">\n      </div>\n    </div>'}()})),document.getElementById("projectsForm").addEventListener("click",(function(){!function(){let t=document.getElementById("formTask");t.innerHTML="",t.innerHTML=' <input type="text" class="full" placeholder="Title: Become a Developer" name="projectName" id="projectName">\n                        <input type="text"  id="formType" name="formType" value="project" hidden>\n                    <div class="form-group between">\n                    <div class="form-btn">\n                      <input type="submit" value="Add project">\n                    </div>\n                  </div>'}()})),r(),u(),d()})();